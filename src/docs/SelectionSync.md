# 选区同步功能

## 概述

本功能实现了线性和圆形视图之间的选区同步。当用户在一种视图模式下创建选区后，切换到另一种视图模式时，选区会自动转换并显示在对应的位置。

## 功能特性

- **自动同步**: 选区在视图切换时自动保持
- **坐标转换**: 线性坐标自动转换为圆形角度，反之亦然
- **视觉反馈**: 现有选区以虚线边框显示，便于识别
- **无缝体验**: 切换视图时选区状态完全保持

## 使用方法

1. **创建选区**: 在任意视图模式下右键拖拽创建选区
2. **切换视图**: 使用视图切换按钮在线性和圆形视图间切换
3. **查看同步**: 选区会自动转换并显示在新视图中

## 技术实现

### 坐标转换

- **线性 → 圆形**: 将序列位置转换为角度

  ```javascript
  const startAngle = (start / totalLength) * 2 * Math.PI;
  const endAngle = (end / totalLength) * 2 * Math.PI;
  ```

- **圆形 → 线性**: 将角度转换为序列位置
  ```javascript
  const start = (startAngle / (2 * Math.PI)) * totalLength;
  const end = (endAngle / (2 * Math.PI)) * totalLength;
  ```

### 状态管理

- 使用 `SelectionContext` 管理全局选区状态
- 通过 `getSelectionsForView()` 获取当前视图的选区数据
- 自动处理不同视图间的数据转换

### 视觉样式

- 现有选区使用蓝色虚线边框显示
- 半透明填充，不影响特征显示
- 与当前选区创建过程区分明显

## 注意事项

- 选区同步基于序列长度，确保数据包含正确的 `locus.sequenceLength` 信息
- 圆形视图中的选区半径会根据实际渲染情况调整
- 选区创建过程中的临时选区不会同步到其他视图
