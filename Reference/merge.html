<svg width="500" height="300" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <rect id="canvas" width="100%" height="100%" fill="white" />
    <rect id="rect" x="50" y="60" width="40" height="70" />
    <circle id="circle" cx="50" cy="50" r="40" />

    <clipPath id="shape">
      <use href="#rect" />
      <use href="#circle" />
    </clipPath>

    <mask id="maskRect">
      <use href="#canvas" />
      <use href="#rect" />
    </mask>

    <mask id="maskCircle">
      <use href="#canvas" />
      <use href="#circle" />
    </mask>
  </defs>
  <rect width="100%" height="100%" fill="red" clip-path="url(#shape)" />
  <use
    href="#rect"
    stroke="blue"
    stroke-width="2"
    fill="red"
    mask="url(#maskCircle)"
  />
  <use
    href="#circle"
    stroke="red"
    stroke-width="2"
    fill="blue"
    mask="url(#maskRect)"
  />
</svg>
